<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to do the configuration of an oidctest instance &#8212; OIDCtest 0.5.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="OIDCtest 0.5.0 documentation" href="../../index.html" />
    <link rel="up" title="How to run OP testing using OIDCtest" href="index.html" />
    <link rel="next" title="Running the OP test tool" href="run.html" />
    <link rel="prev" title="How to run OP testing using OIDCtest" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-do-the-configuration-of-an-oidctest-instance">
<span id="config"></span><h1>How to do the configuration of an oidctest instance<a class="headerlink" href="#how-to-do-the-configuration-of-an-oidctest-instance" title="Permalink to this headline">¶</a></h1>
<p>There are a number of different OP types based on their functionality.
They may or may not support Web Finger, dynamic provider information discovery
and dynamic client registration.</p>
<p>Depending on which type an OP belongs to the configuration file will
look differently.
A configuration file consists of three parts.</p>
<div class="section" id="part-one">
<h2>Part one<a class="headerlink" href="#part-one" title="Permalink to this headline">¶</a></h2>
<p>The first part contains the PORT, BASE and KEYS specification:</p>
<ul class="simple">
<li>PORT is which port the test instance will listen on.</li>
<li>BASE is the basic URL from which the RP specific URLs will be constructed.</li>
<li>KEYS are a specification of the keys that the RP will have.</li>
</ul>
<p>An example would be:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">PORT</span> <span class="o">=</span> <span class="mi">60050</span>
<span class="n">BASE</span> <span class="o">=</span> <span class="s2">&quot;http://localhost&quot;</span>
<span class="n">KEYS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;../keys/enc.key&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;RSA&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;enc&quot;</span><span class="p">]},</span>
    <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;../keys/sig.key&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;RSA&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sig&quot;</span><span class="p">]},</span>
    <span class="p">{</span><span class="s2">&quot;crv&quot;</span><span class="p">:</span> <span class="s2">&quot;P-256&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EC&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sig&quot;</span><span class="p">]},</span>
    <span class="p">{</span><span class="s2">&quot;crv&quot;</span><span class="p">:</span> <span class="s2">&quot;P-256&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EC&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;enc&quot;</span><span class="p">]}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Here the port that the instance will listen on is 60050.
The basic part of the RPs URLs if <a class="reference external" href="http://localhost">http://localhost</a>. What that means
when it comes to the resulting URLs depends on whether you&#8217;re running the
test instance directly visable from the Internet or behind a reverse proxy.
If you&#8217;re not running a reverse proxy the RPs redirect_uri would be
(given that all defaults are used) <a class="reference external" href="http://localhost:60050/authz_cb">http://localhost:60050/authz_cb</a> .
The key specification means that the RP will have access to four own keys.
2 RSA keys (one for signing and one for encryption) and 2 EC keys (again
one for signing and one for encryption). If there are no RSA keys in the
provided file specifications then new keys will be minted and written to the
files. The EC keys will be newly minted every time the test tool is restarted.</p>
</div>
<div class="section" id="part-two">
<h2>Part two<a class="headerlink" href="#part-two" title="Permalink to this headline">¶</a></h2>
<p>The second part specifies the TOOL configuration.
This is configuration that is needed to run the tests.
The set of attributes depends on which tests one expects to run.</p>
<p>There are two MUST attributes and those are <em>issuer</em> and <em>profile</em>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">TOOL</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;profile&quot;</span><span class="p">:</span> <span class="s2">&quot;C.T.T.T.ns.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;issuer&quot;</span><span class="p">:</span> <span class="s2">&quot;https://localhost:8040/&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="issuer">
<h3>issuer<a class="headerlink" href="#issuer" title="Permalink to this headline">¶</a></h3>
<p>The issuer ID of the OpenID Connect Provider</p>
</div>
<div class="section" id="profile">
<h3>profile<a class="headerlink" href="#profile" title="Permalink to this headline">¶</a></h3>
<p>The default profile which is always used as the starting point when
a test instance is restarted and no profile is given as a command argument.</p>
</div>
</div>
<div class="section" id="part-three">
<h2>Part three<a class="headerlink" href="#part-three" title="Permalink to this headline">¶</a></h2>
<p>The third part then is the RP configuration information.
There is a number of possible attibutes. You should not need to modify
<em>behaviour</em> and <em>preferences</em>.
What you do have to modify is &#8216;registration_info&#8217;, &#8216;registration_response&#8217;
and &#8216;provider_information&#8217;.
Which of these you have to touch depends on if your doing
dynamic provider information discovery and/or dynamic client registration.</p>
<div class="section" id="behaviour">
<h3>behaviour<a class="headerlink" href="#behaviour" title="Permalink to this headline">¶</a></h3>
<p><em>Place holder</em></p>
</div>
<div class="section" id="preferences">
<h3>preferences<a class="headerlink" href="#preferences" title="Permalink to this headline">¶</a></h3>
<p>The RPs preferences.</p>
</div>
<div class="section" id="registration-info">
<h3>registration_info<a class="headerlink" href="#registration-info" title="Permalink to this headline">¶</a></h3>
<p>&#8216;registration_info&#8217; is the information the client will register with the OP
when doing dynamic client registration. The set of attributes that can be
used can be found <a class="reference external" href="http://openid.net/specs/openid-connect-registration-1_0.html#ClientMetadata">here</a>:</p>
</div>
<div class="section" id="registration-response">
<h3>registration_response<a class="headerlink" href="#registration-response" title="Permalink to this headline">¶</a></h3>
<p>&#8216;registration_response&#8217; contains the information that was statically
registered with the OP. How this registration happened is completely
out-of-scope for this document</p>
</div>
<div class="section" id="provider-information">
<h3>provider_information<a class="headerlink" href="#provider-information" title="Permalink to this headline">¶</a></h3>
<p>&#8216;provider_information&#8217; is information about the OP that you in some
out-of-band way got hold off. Now, since you&#8217;re running the OP you should now
how. I don&#8217;t.</p>
<p>This means that if you&#8217;re running dynamic provider information discovery and
dynamic client registration you only need <em>registration_info</em>.</p>
<p>If you on the other hand is doing dynamic provider information discovery but
static client registration. Then you need to specify <em>registration_response</em>.</p>
<p>And finally if you do static provider information discovery and static client
registration then you need to specify <em>provider_information</em> and
<em>registration_response</em>.</p>
</div>
</div>
<div class="section" id="configuration-example">
<h2>Configuration Example<a class="headerlink" href="#configuration-example" title="Permalink to this headline">¶</a></h2>
<p>Example configuration for testing an OP that supports both dynamic
provider information discovery and dynamic client registration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">PORT</span> <span class="o">=</span> <span class="mi">60050</span>
<span class="n">BASE</span> <span class="o">=</span> <span class="s2">&quot;http://locahost&quot;</span>
<span class="n">KEYS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;../keys/enc.key&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;RSA&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;enc&quot;</span><span class="p">]},</span>
    <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;../keys/sig.key&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;RSA&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sig&quot;</span><span class="p">]},</span>
    <span class="p">{</span><span class="s2">&quot;crv&quot;</span><span class="p">:</span> <span class="s2">&quot;P-256&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EC&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;sig&quot;</span><span class="p">]},</span>
    <span class="p">{</span><span class="s2">&quot;crv&quot;</span><span class="p">:</span> <span class="s2">&quot;P-256&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EC&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;enc&quot;</span><span class="p">]}</span>
<span class="p">]</span>

<span class="n">TOOL</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;profile&quot;</span><span class="p">:</span> <span class="s2">&quot;C.T.T.T.ns.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;issuer&quot;</span><span class="p">:</span> <span class="s2">&quot;https://localhost:8040/&quot;</span>
    <span class="s2">&quot;acr_values&quot;</span><span class="p">:</span> <span class="s2">&quot;1 2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;claims_locales&quot;</span><span class="p">:</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
    <span class="s2">&quot;instance_id&quot;</span><span class="p">:</span> <span class="s2">&quot;60050&quot;</span><span class="p">,</span>
    <span class="s2">&quot;login_hint&quot;</span><span class="p">:</span> <span class="s2">&quot;foobar&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ui_locales&quot;</span><span class="p">:</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
    <span class="s2">&quot;webfinger_email&quot;</span><span class="p">:</span> <span class="s2">&quot;foobar@localhost:8040&quot;</span><span class="p">,</span>
    <span class="s2">&quot;webfinger_url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://localhost:8040/foobar&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">CLIENT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;behaviour&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;openid&quot;</span><span class="p">,</span> <span class="s2">&quot;profile&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;preferences&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;default_max_age&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
        <span class="s2">&quot;grant_types&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;authorization_code&quot;</span><span class="p">,</span> <span class="s2">&quot;implicit&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token&quot;</span><span class="p">,</span>
            <span class="s2">&quot;urn:ietf:params:oauth:grant-type:jwt-bearer:&quot;</span><span class="p">],</span>
        <span class="s2">&quot;id_token_signed_response_alg&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;RS256&quot;</span><span class="p">,</span> <span class="s2">&quot;RS384&quot;</span><span class="p">,</span> <span class="s2">&quot;RS512&quot;</span><span class="p">,</span> <span class="s2">&quot;HS512&quot;</span><span class="p">,</span> <span class="s2">&quot;HS384&quot;</span><span class="p">,</span> <span class="s2">&quot;HS256&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;request_object_signing_alg&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;RS256&quot;</span><span class="p">,</span> <span class="s2">&quot;RS384&quot;</span><span class="p">,</span> <span class="s2">&quot;RS512&quot;</span><span class="p">,</span> <span class="s2">&quot;HS512&quot;</span><span class="p">,</span> <span class="s2">&quot;HS384&quot;</span><span class="p">,</span> <span class="s2">&quot;HS256&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;require_auth_time&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;response_types&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="s2">&quot;id_token&quot;</span><span class="p">,</span> <span class="s2">&quot;token id_token&quot;</span><span class="p">,</span>
            <span class="s2">&quot;code id_token&quot;</span><span class="p">,</span> <span class="s2">&quot;code token&quot;</span><span class="p">,</span> <span class="s2">&quot;code token id_token&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;subject_type&quot;</span><span class="p">:</span> <span class="s2">&quot;public&quot;</span><span class="p">,</span>
        <span class="s2">&quot;token_endpoint_auth_method&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;client_secret_basic&quot;</span><span class="p">,</span> <span class="s2">&quot;client_secret_post&quot;</span><span class="p">,</span>
            <span class="s2">&quot;client_secret_jwt&quot;</span><span class="p">,</span> <span class="s2">&quot;private_key_jwt&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;userinfo_signed_response_alg&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;RS256&quot;</span><span class="p">,</span> <span class="s2">&quot;RS384&quot;</span><span class="p">,</span> <span class="s2">&quot;RS512&quot;</span><span class="p">,</span> <span class="s2">&quot;HS512&quot;</span><span class="p">,</span> <span class="s2">&quot;HS384&quot;</span><span class="p">,</span> <span class="s2">&quot;HS256&quot;</span>
        <span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;registration_info&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;application_name&quot;</span><span class="p">:</span> <span class="s2">&quot;OIC test tool&quot;</span><span class="p">,</span>
        <span class="s2">&quot;application_type&quot;</span><span class="p">:</span> <span class="s2">&quot;web&quot;</span><span class="p">,</span>
        <span class="s2">&quot;redirect_uris&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/authz_cb&quot;</span><span class="p">],</span>
        <span class="s2">&quot;contacts&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;roland@example.com&quot;</span><span class="p">],</span>
        <span class="s2">&quot;post_logout_redirect_uris&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/logout&quot;</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>More examples can be found in the test_tool/test_op/config_examples
directory in the source distribution of oidctest.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to do the configuration of an oidctest instance</a><ul>
<li><a class="reference internal" href="#part-one">Part one</a></li>
<li><a class="reference internal" href="#part-two">Part two</a><ul>
<li><a class="reference internal" href="#issuer">issuer</a></li>
<li><a class="reference internal" href="#profile">profile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#part-three">Part three</a><ul>
<li><a class="reference internal" href="#behaviour">behaviour</a></li>
<li><a class="reference internal" href="#preferences">preferences</a></li>
<li><a class="reference internal" href="#registration-info">registration_info</a></li>
<li><a class="reference internal" href="#registration-response">registration_response</a></li>
<li><a class="reference internal" href="#provider-information">provider_information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration-example">Configuration Example</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">How to use OIDCtest</a><ul>
  <li><a href="index.html">How to run OP testing using OIDCtest</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">How to run OP testing using OIDCtest</a></li>
      <li>Next: <a href="run.html" title="next chapter">Running the OP test tool</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/OIDCtesting/OPtest/configuration.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Roland Hedberg.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/OIDCtesting/OPtest/configuration.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>