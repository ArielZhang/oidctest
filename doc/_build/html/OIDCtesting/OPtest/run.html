<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Running the OP test tool &#8212; OIDCtest 0.5.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="OIDCtest 0.5.0 documentation" href="../../index.html" />
    <link rel="up" title="How to run OP testing using OIDCtest" href="index.html" />
    <link rel="next" title="How to run RP library testing using OIDCtest" href="../RPtest/index.html" />
    <link rel="prev" title="How to do the configuration of an oidctest instance" href="configuration.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-the-op-test-tool">
<span id="run-op"></span><h1>Running the OP test tool<a class="headerlink" href="#running-the-op-test-tool" title="Permalink to this headline">¶</a></h1>
<p>To begin with you will have to manually create description/configuration files
for every OP you want to test.
More about that in the configuration <a class="reference internal" href="configuration.html#config"><span class="std std-ref">How to do the configuration of an oidctest instance</span></a>.</p>
<p>Once you have a configuration file for the OP that should be tested you can
start the test instance by running optest.py:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">optest</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">o</span> <span class="n">OPERATIONS</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span> <span class="n">FLOWS</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">p</span> <span class="n">PROFILE</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">P</span> <span class="n">PROFILES</span><span class="p">]</span>
                 <span class="p">[</span><span class="o">-</span><span class="n">M</span> <span class="n">MAKODIR</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">S</span> <span class="n">STATICDIR</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">s</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">x</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span> <span class="n">PATH2PORT</span><span class="p">]</span>
                 <span class="n">config</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="n">config</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>     <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">o</span> <span class="n">OPERATIONS</span>
  <span class="o">-</span><span class="n">f</span> <span class="n">FLOWS</span>
  <span class="o">-</span><span class="n">p</span> <span class="n">PROFILE</span>
  <span class="o">-</span><span class="n">P</span> <span class="n">PROFILES</span>
  <span class="o">-</span><span class="n">M</span> <span class="n">MAKODIR</span>
  <span class="o">-</span><span class="n">S</span> <span class="n">STATICDIR</span>
  <span class="o">-</span><span class="n">s</span>
  <span class="o">-</span><span class="n">x</span>             <span class="n">ONLY</span> <span class="k">for</span> <span class="n">testing</span>
  <span class="o">-</span><span class="n">m</span> <span class="n">PATH2PORT</span>
</pre></div>
</div>
<div class="section" id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<div class="section" id="profile">
<h3>profile<a class="headerlink" href="#profile" title="Permalink to this headline">¶</a></h3>
<p>If profile is not specified it is taken from the configuration file.
The format of the profile string is as follows:</p>
<ul class="simple">
<li>Flow (C=&#8217;code&#8217;, I=&#8217;id_token&#8217;, T=&#8217;token&#8217;, CI=&#8217;code id_token&#8217;,
IT=&#8217;idtoken token&#8217;, CIT=&#8217;code id_token token&#8217;)</li>
<li>Do Webfinger (T=True, F=False)</li>
<li>Do Dynamic Provider Configuration discovery (T=True, F=False)</li>
<li>Do Dynamic Client registration (T=True, F=False)</li>
<li>refers to crypto/JWT capabilities (n=unsigned, s=signed, e=encrypted)</li>
</ul>
<p>So &#8216;C.T.T.F&#8217; means:
Do Code flow use WebFinger and dynamic provider discovery but not dynamic client
registration nor any crypto.</p>
</div>
<div class="section" id="flows">
<h3>flows<a class="headerlink" href="#flows" title="Permalink to this headline">¶</a></h3>
<p>Must point to a flows.yaml file which specifies which tests there are and
how they are supposed to act.</p>
</div>
<div class="section" id="x-insecure">
<h3>x/insecure<a class="headerlink" href="#x-insecure" title="Permalink to this headline">¶</a></h3>
<p>If the test instance should not try to verify the TLS certificates of the
OP.</p>
</div>
<div class="section" id="path2port">
<h3>path2port<a class="headerlink" href="#path2port" title="Permalink to this headline">¶</a></h3>
<p>If the test tool is supposed to work behind a reverse proxy this is the
map between path and port number. It&#8217;s expected to be a csv file with one
map per line:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">oauth</span><span class="o">-</span><span class="n">rp</span><span class="o">-</span><span class="n">code</span><span class="o">-</span><span class="n">test</span><span class="p">,</span><span class="mi">8081</span>
<span class="n">oauth</span><span class="o">-</span><span class="n">rp</span><span class="o">-</span><span class="n">token</span><span class="o">-</span><span class="n">test</span><span class="p">,</span><span class="mi">8082</span>
<span class="n">oidc</span><span class="o">-</span><span class="n">rp</span><span class="o">-</span><span class="n">code</span><span class="o">-</span><span class="n">test</span><span class="p">,</span><span class="mi">8091</span>
<span class="n">oidc</span><span class="o">-</span><span class="n">rp</span><span class="o">-</span><span class="n">token</span><span class="o">-</span><span class="n">test</span><span class="p">,</span><span class="mi">8092</span>
</pre></div>
</div>
</div>
<div class="section" id="s-tls">
<h3>s/tls<a class="headerlink" href="#s-tls" title="Permalink to this headline">¶</a></h3>
<p>Whether the RP should use TLS for all communication. This is not necessary
if the test tool is behind a reverse proxy or other functions that
terminates the HTTPS connection before the traffix reaches the test tool.</p>
</div>
<div class="section" id="s-staticdir">
<h3>S/staticdir<a class="headerlink" href="#s-staticdir" title="Permalink to this headline">¶</a></h3>
<p>If another directory then &#8216;static&#8217; should be used for all the static files
then that is specified here.</p>
</div>
<div class="section" id="m-makodir">
<h3>M/Makodir<a class="headerlink" href="#m-makodir" title="Permalink to this headline">¶</a></h3>
<p>The directory where Mako is expecting all the files it need to access.
So subdirectories in this directory should be <em>htdocs</em>, <em>modules</em> and
<em>template</em>.</p>
</div>
<div class="section" id="o-operation">
<h3>O/Operation<a class="headerlink" href="#o-operation" title="Permalink to this headline">¶</a></h3>
<p>Code that describes what operations the test tool should be able to perform.
This flag should <strong>only</strong> be used if the standard set is not to be used.</p>
</div>
<div class="section" id="p-profiles">
<h3>P/profiles<a class="headerlink" href="#p-profiles" title="Permalink to this headline">¶</a></h3>
<p>Descriptions of the different flow profiles.
This flag should <strong>only</strong> be used if the standard set is not to be used.</p>
</div>
</div>
<div class="section" id="command-example">
<h2>Command example<a class="headerlink" href="#command-example" title="Permalink to this headline">¶</a></h2>
<p>Very simple example where there is one flows.yaml file and a configuration
file named &#8216;config&#8217;</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">optest</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">f</span> <span class="n">flows</span><span class="o">.</span><span class="n">yaml</span> <span class="o">-</span><span class="n">s</span> <span class="n">config</span>
</pre></div>
</div>
<p>Slightly more complex. This test instance is behind a reverse proxy so
it doesn&#8217;t need to run HTTPS. It also will have a base URL that doesn&#8217;t contain
the port number but instead a path description. And Lastly you want to use a
profile that is not the default profile specified in the config file</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">optest</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">f</span> <span class="n">flows</span><span class="o">.</span><span class="n">yaml</span> <span class="o">-</span><span class="n">m</span> <span class="n">reverse</span><span class="o">.</span><span class="n">csv</span> <span class="o">-</span><span class="n">p</span> <span class="n">C</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">nse</span> <span class="n">config</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Running the OP test tool</a><ul>
<li><a class="reference internal" href="#arguments">Arguments</a><ul>
<li><a class="reference internal" href="#profile">profile</a></li>
<li><a class="reference internal" href="#flows">flows</a></li>
<li><a class="reference internal" href="#x-insecure">x/insecure</a></li>
<li><a class="reference internal" href="#path2port">path2port</a></li>
<li><a class="reference internal" href="#s-tls">s/tls</a></li>
<li><a class="reference internal" href="#s-staticdir">S/staticdir</a></li>
<li><a class="reference internal" href="#m-makodir">M/Makodir</a></li>
<li><a class="reference internal" href="#o-operation">O/Operation</a></li>
<li><a class="reference internal" href="#p-profiles">P/profiles</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-example">Command example</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">How to use OIDCtest</a><ul>
  <li><a href="index.html">How to run OP testing using OIDCtest</a><ul>
      <li>Previous: <a href="configuration.html" title="previous chapter">How to do the configuration of an oidctest instance</a></li>
      <li>Next: <a href="../RPtest/index.html" title="next chapter">How to run RP library testing using OIDCtest</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/OIDCtesting/OPtest/run.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Roland Hedberg.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/OIDCtesting/OPtest/run.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>