Profile: ['C']
Test ID: userinfo
Test description: Simple code profile with ES256 signatures
Timestamp: 2016-05-24T14:56:11Z

============================================================

Trace output

Trace init: Tue, 24 May 2016 14:55:11 +0000
0.008061 Conversation initiated
1.254824 Running 'Login'
1.254870 Doing GET on https://localhost:8088/rp?issuer=https%3A%2F%2Flocalhost%3A8091%2Fd22rsuOEfrHEYSeVxa48tQ7O
3.174206 Running 'ConfigurationResponse'
5.234588 Assert VerifyRegistrationPublicKeyRegistration
6.191119 Assert VerifyRegistrationRedirectUriScheme
12.532541 Assert VerifyRegistrationResponseTypes
14.007664 Running 'RegistrationResponse'
14.040248 Got a 302 response
14.040670 Received HTML: <html>
<head><title>Redirecting to https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/authorization?response_type=code&redirect_uri=https%3A%2F%2Flocalhost%3A8088%2Fauthz_cb%2F82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702&state=GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk&nonce=nGUQFXLjyJZZhJuHny2KUTzQohW8pH7E&scope=openid+profile+email+address+phone&client_id=L7RCMIwfEV74</title></head>
<body>
You are being redirected to <a href="https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/authorization?response_type=code&redirect_uri=https%3A%2F%2Flocalhost%3A8088%2Fauthz_cb%2F82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702&state=GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk&nonce=nGUQFXLjyJZZhJuHny2KUTzQohW8pH7E&scope=openid+profile+email+address+phone&client_id=L7RCMIwfEV74">https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/authorization?response_type=code&redirect_uri=https%3A%2F%2Flocalhost%3A8088%2Fauthz_cb%2F82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702&state=GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk&nonce=nGUQFXLjyJZZhJuHny2KUTzQohW8pH7E&scope=openid+profile+email+address+phone&client_id=L7RCMIwfEV74</a>
</body>
</html>
20.148549 Assert VerifyAuthorizationRedirectUri
42.753318 Assert VerifyAuthorizationStateEntropy
44.109978 Assert VerifyAuthorizationOfflineAccess
45.784806 Running 'AuthorizationResponse'
45.787222 {'client_id': 'L7RCMIwfEV74', 'nonce': 'nGUQFXLjyJZZhJuHny2KUTzQohW8pH7E', 'response_type': 'code', 'state': 'GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk', 'redirect_uri': 'https://localhost:8088/authz_cb/82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702', 'scope': 'openid email phone'}
52.563209 Running 'AccessTokenResponse'
59.959345 Running 'UserInfoResponse'



============================================================

Conditions

RegistrationResponse:verify-registration-public_key-registration: status=OK
RegistrationResponse:verify-registration-redirect_uri-scheme: status=OK
RegistrationResponse:verify-registration-response_types: status=OK
AuthorizationResponse:verify-authorization-redirect_uri: status=OK
AuthorizationResponse:verify-authorization-state-entropy: status=OK
AuthorizationResponse:verify-authorization-offline-access: status=OK
Done: status=OK



============================================================

Events
1464101711.971792:operation:<class 'otest.rp.operation.Login'>
1464101712.574708:start_page:https://localhost:8088/rp?issuer=https%3A%2F%2Flocalhost%3A8091%2Fd22rsuOEfrHEYSeVxa48tQ7O
1464101713.229738:request:
1464101713.868286:operation:<class 'otest.rp.operation.ConfigurationResponse'>
1464101714.497619:response:{"request_parameter_supported": true, "require_request_uri_registration": true, "jwks_uri": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/static/jwks.json", "userinfo_signing_alg_values_supported": ["ES256"], "subject_types_supported": ["pairwise"], "issuer": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O", "token_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/token", "version": "3.0", "authorization_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/authorization", "claim_types_supported": ["normal"], "scopes_supported": ["email", "offline_access", "openid", "phone"], "claims_parameter_supported": true, "response_types_supported": ["code", "id_token token", "token"], "revocation_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/revocation", "request_uri_parameter_supported": false, "grant_types_supported": ["authorization_code", "implicit", "urn:ietf:params:oauth:grant-type:jwt-bearer"], "userinfo_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/userinfo", "request_object_signing_alg_values_supported": ["ES256"], "introspection_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/introspection", "claims_supported": ["email", "email_verified", "name", "phone_number", "phone_number_verified", "sub"], "token_endpoint_auth_methods_supported": ["client_secret_basic"], "id_token_signing_alg_values_supported": ["ES256"], "token_endpoint_auth_signing_alg_values_supported": ["ES256"], "response_modes_supported": ["form_post", "fragment", "query"], "clientinfo_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/clientinfo", "registration_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/registration", "end_session_endpoint": "https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/end_session"}
1464101715.144632:request:{"jwks_uri": "https://localhost:8088/static/jwks_uri.json", "application_type": "web", "post_logout_redirect_uris": ["https://localhost:8088/logout_success/82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702"], "response_types": ["code"], "redirect_uris": ["https://localhost:8088/authz_cb/82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702"], "contacts": ["ops@example.com"]}
1464101715.145247:protocol request:{'application_type': 'web', 'response_types': ['code'], 'jwks_uri': 'https://localhost:8088/static/jwks_uri.json', 'redirect_uris': ['https://localhost:8088/authz_cb/82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702'], 'post_logout_redirect_uris': ['https://localhost:8088/logout_success/82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702'], 'contacts': ['ops@example.com']}
1464101715.806704:operation:<class 'otest.rp.operation.RegistrationResponse'>
1464101717.51037:condition:RegistrationResponse:verify-registration-public_key-registration: status=OK
1464101723.851782:condition:RegistrationResponse:verify-registration-redirect_uri-scheme: status=OK
1464101725.327473:condition:RegistrationResponse:verify-registration-response_types: status=OK
1464101725.36007:http response:<aatest.events.HTTPResponse object at 0x109cbacc0>
1464101725.360133:Cookie:localhost.beaker.session.id=271022f6dfdf424ba4eb0d48dbb2f6cc; Path=/
1464101725.360476:redirect url:https://localhost:8091/d22rsuOEfrHEYSeVxa48tQ7O/authorization?response_type=code&redirect_uri=https%3A%2F%2Flocalhost%3A8088%2Fauthz_cb%2F82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702&state=GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk&nonce=nGUQFXLjyJZZhJuHny2KUTzQohW8pH7E&scope=openid+profile+email+address+phone&client_id=L7RCMIwfEV74
1464101729.567395:request:response_type=code&redirect_uri=https%3A%2F%2Flocalhost%3A8088%2Fauthz_cb%2F82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702&state=GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk&nonce=nGUQFXLjyJZZhJuHny2KUTzQohW8pH7E&scope=openid+profile+email+address+phone&client_id=L7RCMIwfEV74
1464101729.568187:protocol request:{'client_id': 'L7RCMIwfEV74', 'nonce': 'nGUQFXLjyJZZhJuHny2KUTzQohW8pH7E', 'response_type': 'code', 'state': 'GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk', 'redirect_uri': 'https://localhost:8088/authz_cb/82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702', 'scope': 'openid profile email address phone'}
1464101730.598689:operation:<class 'otest.rp.operation.AuthorizationResponse'>
1464101754.072423:condition:AuthorizationResponse:verify-authorization-redirect_uri: status=OK
1464101755.42912:condition:AuthorizationResponse:verify-authorization-state-entropy: status=OK
1464101757.104554:condition:AuthorizationResponse:verify-authorization-offline-access: status=OK
1464101760.782995:HTTP_AUTHORIZATION:Basic TDdSQ01Jd2ZFVjc0OjEyYmRjNmFjYmJmNGMxOWY3MThmMDY5MDA1OThmMjU4NTA0YzIxMjRmNGIxNTlkMGM1ZDFkZjZj
1464101760.783502:request:code=OK9WCcDyg26lKnvbDks7Q1o%2Bl2mZWvpce3gvav6MVkFP3wbdjJxkPCAbKmBkSpk5SHp1yqUU87g2dsxlLU9CVpDkeYG8FQuP%2FFNRQ16AMuH7elFqiIahbYGYxk%2BTLomelXqolD71FTJQLuHSMrQj5g%3D%3D&grant_type=authorization_code&redirect_uri=https%3A%2F%2Flocalhost%3A8088%2Fauthz_cb%2F82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702&state=GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk&scope=openid+email+phone
1464101760.783982:protocol request:{'state': 'GumBKjXmg4rDhAgWumzC6f6fXcUaSCmk', 'redirect_uri': 'https://localhost:8088/authz_cb/82baf8855c3860808e04c1f3f3053b6b46f1e25a42e38f3d3fe0b55189071702', 'grant_type': 'authorization_code', 'scope': 'openid email phone', 'code': 'OK9WCcDyg26lKnvbDks7Q1o+l2mZWvpce3gvav6MVkFP3wbdjJxkPCAbKmBkSpk5SHp1yqUU87g2dsxlLU9CVpDkeYG8FQuP/FNRQ16AMuH7elFqiIahbYGYxk+TLomelXqolD71FTJQLuHSMrQj5g=='}
1464101762.281921:operation:<class 'otest.rp.operation.AccessTokenResponse'>
1464101769.340049:request:access_token=eyJhbGciOiJSUzI1NiIsImtpZCI6ImExIn0.eyJpYXQiOiAxNDY0MTAxNzYzLCAiaXNzIjogImh0dHBzOi8vbG9jYWxob3N0IiwgImF1ZCI6IFsiTDdSQ01Jd2ZFVjc0Il0sICJqdGkiOiAiVC1mMmNmYjIzMmEzM2Y0ZjRhYjExNTk3ZDllM2FkMzRiMiIsICJhenAiOiAiTDdSQ01Jd2ZFVjc0IiwgImtpZCI6ICJhMSIsICJleHAiOiAxNDY0MTA1MzYzLCAic3ViIjogIjFiMmZjOTM0MWExNmFlNGUzMDA4Mjk2NWQ1MzdhZTQ3YzIxYTBmMjdmZDQzZWFiNzgzMzBlZDgxNzUxYWU2ZGIiLCAic2NvcGUiOiAib3BlbmlkIGVtYWlsIHBob25lIn0.ryRbvYRIV8J2ZVJ31Si1i917BFPxb2A-28Fsmyy3LNxDK7k3rPEnBCrepaF2a4Ve5VmNTEK_N5E68UofNglxDtB-37awlG0phFr3nEF09TXI0KAZSqP5G7byq3-tBhRDsjEyrAxDA_61MCdjJAQRNJCz86Dr6akhs9AS6u8hnME
1464101769.340283:protocol request:{'access_token': 'eyJhbGciOiJSUzI1NiIsImtpZCI6ImExIn0.eyJpYXQiOiAxNDY0MTAxNzYzLCAiaXNzIjogImh0dHBzOi8vbG9jYWxob3N0IiwgImF1ZCI6IFsiTDdSQ01Jd2ZFVjc0Il0sICJqdGkiOiAiVC1mMmNmYjIzMmEzM2Y0ZjRhYjExNTk3ZDllM2FkMzRiMiIsICJhenAiOiAiTDdSQ01Jd2ZFVjc0IiwgImtpZCI6ICJhMSIsICJleHAiOiAxNDY0MTA1MzYzLCAic3ViIjogIjFiMmZjOTM0MWExNmFlNGUzMDA4Mjk2NWQ1MzdhZTQ3YzIxYTBmMjdmZDQzZWFiNzgzMzBlZDgxNzUxYWU2ZGIiLCAic2NvcGUiOiAib3BlbmlkIGVtYWlsIHBob25lIn0.ryRbvYRIV8J2ZVJ31Si1i917BFPxb2A-28Fsmyy3LNxDK7k3rPEnBCrepaF2a4Ve5VmNTEK_N5E68UofNglxDtB-37awlG0phFr3nEF09TXI0KAZSqP5G7byq3-tBhRDsjEyrAxDA_61MCdjJAQRNJCz86Dr6akhs9AS6u8hnME'}
1464101770.467186:operation:<class 'otest.rp.operation.UserInfoResponse'>
1464101771.284908:condition:Done: status=OK

============================================================

RESULT: PASSED
